function globalBox(scope){function PopOvers(scope){$(".pop-over",scope).popover()}function mediaUA(mediaElement,domObject,type){"undefined"!=typeof analytics&&(mediaElement.addEventListener("pause",function(){var percentWatched=Math.floor(100/mediaElement.duration*mediaElement.currentTime),uaCategory=type,uaLabel=type+", mediaElement.duration",uaAction="",uaValue="";100==percentWatched?(uaAction="Ended",uaValue=100):(uaAction="Paused",uaValue=percentWatched),analytics.trigger(uaCategory,uaAction,uaLabel,uaValue)},!1),mediaElement.addEventListener("play",function(){var uaCategory=type,uaLabel=type+", mediaElement.duration",uaAction="Played",uaValue="100";analytics.trigger(uaCategory,uaAction,uaLabel,uaValue)},!1),mediaElement.addEventListener("seeked",function(){var current=mediaElement.currentTime,uaCategory=type,uaLabel=type+", mediaElement.duration",uaAction="Seeked to ",uaValue="current";current>0&&analytics.trigger(uaCategory,uaAction,uaLabel,uaValue)},!1),mediaElement.addEventListener("error",function(){var vError=mediaElement.error,uaCategory=type,uaLabel=type+", mediaElement.duration",uaAction=type+" Error"+vError,uaValue="0";analytics.trigger(uaCategory,uaAction,uaLabel,uaValue)},!1))}"ontouchstart"in document&&$(".modal-pop",scope).each(function(){$(this).addClass("pop").removeClass("modal-pop")}),$(".lightbox",scope).each(function(){var maxWidth=$(this).attr("data-maxWidth"),maxHeight=$(this).attr("data-maxHeight");(void 0==maxWidth||""==maxWidth)&&(maxWidth="80%"),(void 0==maxHeight||""==maxHeight)&&(maxHeight="80%"),$(this).colorbox({scalePhotos:!0,maxWidth:maxWidth,maxHeight:maxHeight,fixed:!0})}),$(".gallery",scope).each(function(){var maxWidth=$(this).attr("data-maxWidth"),maxHeight=$(this).attr("data-maxHeight");(void 0==maxWidth||""==maxWidth)&&(maxWidth="60%"),(void 0==maxHeight||""==maxHeight)&&(maxHeight="60%"),$(this).colorbox({rel:$(this).attr("rel"),scalePhotos:!0,width:maxWidth,height:maxHeight,fixed:!0,arrowKey:!0})}),$(".modal-pop",scope).each(function(){var modalWidth=$(this).attr("data-mWidth"),modalHeight=$(this).attr("data-mHeight");void 0==modalWidth&&(modalWidth="90%"),void 0==modalHeight&&(modalHeight="90%"),$(this).hasClass("dlink")?$(this).colorbox({title:"",iframe:!0,width:modalWidth,height:modalHeight,fixed:!0}):$(this).colorbox({iframe:!0,width:modalWidth,height:modalHeight,fixed:!0})}),$('[data-toggle="collapse"]',scope).each(function(){if(0===$(this).siblings(".in").length){var icon=$(document.createElement("span")).addClass("collapseArrow glyphicon glyphicon-circle-arrow-down");$(this).addClass("collapsed")}else var icon=$(document.createElement("span")).addClass("collapseArrow glyphicon glyphicon-circle-arrow-up");$(this).css("cursor","pointer"),0===$(this).children("span.collapseArrow").length&&$(this).prepend(icon)}),$(".tabs",scope).each(function(){var tabobject=$(document.createElement("div")).addClass("tabs-block"),panelobject=$(document.createElement("div")).addClass("panel-block"),brk=$(document.createElement("br")).addClass("clear tab-br");$(this).append(tabobject),$(this).append(brk),$(this).append(panelobject),$(this).find(".panel").each(function(idx){var idx=$(this).index();$(this).appendTo(panelobject).attr("data-id",idx)}),$(this).find(".tab").each(function(){$(this).appendTo(tabobject),$(this).attr("href","javascript:void(0);"),$(this).removeClass("active"),$(this).click(function(){$(tabobject).find(".tab").removeClass("active"),$(this).addClass("active");var indx=$(this).index();$(panelobject).find(".panel").addClass("notVisible"),$(panelobject).find(".panel:eq("+indx+")").removeClass("notVisible")})}),$(tabobject).find(".tab:eq(0)").addClass("active"),$(panelobject).find(".panel").each(function(index){0!=index&&$(this).addClass("notVisible")}),$(this).attr("data-position")&&("left"==$(this).attr("data-position")?($(this).find("br.tab-br").remove(),$(this).append(brk),$(tabobject).find(".tab").addClass("leftAlign"),$(tabobject).css("float","left").css("width","20%"),$(panelobject).css("float","left").css("width","80%")):$(this).attr("data-position")&&($(this).find("br.tab-br").remove(),$(this).append(brk),$(tabobject).find(".tab").addClass("rightAlign"),$(tabobject).css("float","right").css("width","20%"),$(panelobject).css("float","right").css("width","80%")))}),$(".roundabout",scope).each(function(){var tilt_ra="0.0",duration_ra="600",btnPrev_ra="",btnNext_ra="",childSelector_ra="li",startingChild_ra="0",autoplay_ra="false",containheight=400,containWidth=700;$(this).attr("data-autoplay")&&(autoplay_ra=$(this).data("autoplay")),$(this).attr("data-startingchild")&&(startingChild_ra=$(this).data("startingchild")),$(this).attr("data-childselector")&&(childSelector_ra=$(this).data("childselector")),$(this).attr("data-btnnext")&&(btnNext_ra=$(this).data("btnnext")),$(this).attr("data-btnprev")&&(btnPrev_ra=$(this).data("btnprev")),$(this).attr("data-duration")&&(duration_ra=$(this).data("duration")),$(this).attr("data-tilt")&&(tilt_ra=$(this).data("tilt")),$(this).attr("data-height")?(containheight=$(this).data("height"),$(this).css("height",containheight)):(containheight=$(this).children().height()+50,$(this).css("height",containheight)),$(this).attr("data-width")?(containWidth=$(this).data("width"),$(this).css("width",containWidth)):(containWidth=$(this).parent().width()-50,$(this).css("width",containWidth)),$(this).roundabout({duration:duration_ra,btnNext:btnNext_ra,btnPrev:btnPrev_ra,reflect:!0,tilt:tilt_ra,autoplay:autoplay_ra,startingChild:startingChild_ra,childSelector:childSelector_ra})}),$(".tooltip",scope).each(function(){var tip=$(this).attr("data-tip"),position=$(this).attr("data-position")||"top",content=$(this).html(),obj=$(this).data(),newlink=$("<a />").attr({href:"javascript:void(0);","class":"_tip tip-"+position,title:tip}).data(obj).html(content);$(this).after(newlink),$(this).remove()}),$(".dbtip",scope).each(function(){var con=$(this).find("span").clone();$(this).find("span").remove();var lnk=$.trim($(this).text());$(this).empty();var container=$(document.createElement("span")).addClass("dbtip_container"),clink=$(document.createElement("a")).attr("href","javascript:void(0)").html(lnk);$(this).replaceWith(container),$(clink).appendTo(container),$(con).appendTo(container)}),$(".audio-tip").each(function(){var tip=$(this).attr("data-tip"),position=$(this).attr("data-position")||"top",content=$(this).html(),src=$(this).attr("data-src"),audioType=$(this).attr("data-audio-type"),obj=$(this).data(),audio='<audio class="audioBtn audioTip" src="'+src+'" controls></audio> ',newlink=$("<a />").attr({href:"javascript:void(0);","class":"_audio-tip audio-tip-"+position,title:audio+tip,"data-src":src,"data-audio-type":audioType}).data(obj).html(content);$(this).after(newlink),$(this).remove(),require(["mediaelement"],function(){})}),$(".popover").each(function(){var title=$(this).data("title"),content=$(this).data("content"),placement=$(this).data("position"),linkText=$(this).html();if("ontouchstart"in window)var trigger="click";else var trigger=$(this).data("trigger");{var newlink=$(document.createElement("a")).attr("href","javascript:void(0);").attr("class","pop-over").attr("data-original-title",title).attr("data-content",content).attr("data-placement",placement).attr("data-trigger",trigger).html(linkText);$(this).after(newlink)}$(this).remove()}),PopOvers(document);var $currentPopover=null;$(document).on("shown.bs.popover",function(ev){var $target=$(ev.target);$currentPopover&&$currentPopover.get(0)!=$target.get(0)&&$currentPopover.popover("hide"),$currentPopover=$target}),$(document).on("hidden.bs.popover",function(ev){var $target=$(ev.target);$currentPopover&&$currentPopover.get(0)==$target.get(0)&&($currentPopover=null)}),$(document).on("click",function(e){0==$(e.target).hasClass("pop-over")&&0==$(e.target).hasClass("popover")&&0==$(e.target).parent().hasClass("popover")&&$(".pop-over").popover("hide")});var video=$(".video",scope),audio=$(".audio",scope),audioBtn=$(".audioBtn",scope),audioSlide=$(".audioSlide",scope),audioTip=$("._audio-tip",scope);"default"!==settings.meSkin&&(video.addClass("mejs-"+settings.meSkin),audio.addClass("mejs-cf20"),audioBtn.addClass("mejs-cf20"),audioSlide.addClass("mejs-cf20")),(video.length>0||audio.length>0||audioBtn.length>0||audioSlide.length>0||audioTip.length>0)&&require(["mediaelement"],function(){video.length>0&&video.mediaelementplayer({pluginPath:url_fromGlobal+"/swf/",features:["playpause","progress","current","duration","tracks","volume","fullscreen"],success:function(mediaElement,domObject){mediaUA(mediaElement,domObject,"Video")}}),audio.length>0&&audio.mediaelementplayer({pluginPath:url_fromGlobal+"swf/",features:["playpause","progress","duration","volume"],success:function(mediaElement,domObject){mediaUA(mediaElement,domObject,"Audio")}}),audioBtn.length>0&&audioBtn.mediaelementplayer({audioWidth:24,audioHeight:30,features:["playpause"],pluginPath:url_fromGlobal+"swf/",success:function(mediaElement,domObject){mediaUA(mediaElement,domObject,"Audio")}}),audioSlide.length>0&&(audioSlide.mediaelementplayer({audioWidth:220,pauseOtherPlayers:!0,features:["playpause","progress","duration","volume"],pluginPath:url_fromGlobal+"swf/",success:function(mediaElement,domObject){mediaUA(mediaElement,domObject,"Audio")}}),$(".audioSlide").hide(),$("._showAudioSlide").fadeIn())}),toolTip(scope)}function activateAssets(){function kalturaPause(){$("div.kaltura").each(function(){$.each(videoID,function(key,value){if("playing"===value){var kdpC=document.getElementById(key);kdpC.sendNotification("doPause")}})})}globalBox(document),$(".interactive").each(function(){{var showTextVersion,self=$(this),params=$(this).attr("data-src").split(":"),textVersion=$(this).html(),isSwiffy=params[0].search(".swiffy"),isSWF=params[0].search(".swf"),printTextVersion=$(document.createElement("a")).addClass("print").addClass("printText").addClass("btnlink").html('<span class="glyphicon glyphicon-print"></span> '+language.Print),swfCreate=$(document.createElement("div")).addClass("swfObject"),buttonCreate=$(document.createElement("button")).addClass("toggleSwitch btn btn-primary").addClass("hidden-phone").text(language.TextVersion),textverCreate=$(document.createElement("div")).addClass("textVersion").addClass("notVisible").append(textVersion).append(printTextVersion),iframe=$(document.createElement("iframe")).css({border:0}).attr("src",params[0]).attr("scrolling","no").attr("width",params[1]).attr("height",params[2]);self.wrap('<div class="ooShell"></div>')}if("undefined"==typeof params[3]){showTextVersion=-1,$(this).after(buttonCreate),$(this).after(textverCreate);var urlText=self.attr("data-textversion");urlText&&$.ajax({type:"GET",url:urlText,dataType:"html",error:function(){console.log("textversion didn't load, please check it for errors")},success:function(data){var body_html=document.createDocumentFragment();$.each($(data),function(index,value){"#text"!==value.nodeName&&"META"!==value.nodeName&&"TITLE"!==value.nodeName&&body_html.appendChild(value)});var currentText=self.next(".textVersion");currentText.append(body_html),globalBox(currentText.parent())}})}else showTextVersion=params[3].search("notext");if(-1==isSWF||touchSupport?(-1!=params[0].search(".htm")||-1!=params[0].search(".html"))&&($(this).removeClass("interactive").addClass("activeInteractive"),$(this).append(iframe),$(iframe).load(function(){})):($(this).removeClass("interactive").addClass("activeInteractive"),$(this).append(swfCreate),$(this).children("div.swfObject").flash({swf:params[0],width:params[1],height:params[2],flashvars:params[3]})),-1!=isSwiffy&&0==$.support.leadingWhitespace){var paramStr=params[0].toString(),paramStr=paramStr.replace(paramStr.substring(paramStr.indexOf(".swiffy")),".swf");params[0]=paramStr,isSWF=1}}),$(".checklist").each(function(){function buildChecklist(){var is_custom_checklist=!1,cols=CKthis.attr("data-info"),titles=CKthis.attr("data-titles"),lessonNum=void 0!=CKthis.attr("data-lessonNum")?CKthis.attr("data-lessonNum"):!1;void 0!=cols&&void 0!=titles&&(cols=cols.split("|"),titles=titles.split("|"),cols.length==titles.length&&(is_custom_checklist=!0));var table='<table class="table table-bordered lesson_checklist">';if(is_custom_checklist){table+='<thead><tr><th class="text-left thLesson">Lesson</th>';for(var a=0;a<cols.length;a++)table+='<th class="text-center thCols_'+a+'">'+titles[a]+"</th>";table+="</thead><tbody>"}else table+='<thead><tr><th class="text-left thLesson">Lesson</th><th class="text-center thPoints">Points Possible</th><th class="text-center thTime">Time</th></tr></thead><tbody>';var cm;cm=CKthis.attr("data-module")?parseInt(CKthis.attr("data-module")-1):current_module,"undefined"==typeof cm&&1==isexternal&&alert('you need to specify the module you want since this is a popup  -  data-module="3"');for(var i=0;i<FLVS.Sitemap.module[cm].lesson.length;i++){var numPages=FLVS.Sitemap.module[cm].lesson[i].page.length,ptitle="Points",mtitle="Minutes";1==Number(FLVS.Sitemap.module[cm].lesson[i].points)&&(ptitle="Point"),1==Number(FLVS.Sitemap.module[cm].lesson[i].time)&&(mtitle="Minute");var lNum=FLVS.Sitemap.module[cm].lesson[i].num,lTitle=FLVS.Sitemap.module[cm].lesson[i].title,lHref=FLVS.Sitemap.module[cm].lesson[i].page[0].href,lessonNumShow="true"===lessonNum?'<span class="lesson_number">'+lNum+"</span>":"";if(table+="<tr>",is_custom_checklist){table+=1==isexternal?'<td class="width40 text-left tdLesson">'+lessonNumShow+" "+lTitle+"</td>":'<td class="width40 text-left tdLesson"><a href="../js/'+lHref+'">'+lessonNumShow+" "+lTitle+"</a></td>";for(var j=0;j<cols.length;j++){var w=10*Math.round(60/cols.length/10);table+=void 0!=FLVS.Sitemap.module[cm].lesson[i][cols[j]]?'<td class="width'+w+" text-center thCols_"+j+'">'+FLVS.Sitemap.module[cm].lesson[i][cols[j]]+"</td>":'<td class="width'+w+" text-center thCols_"+j+'">&nbsp;</td>'}}else table+=1==isexternal?'<td class="width60 text-left tdLesson">'+lessonNumShow+" "+lTitle+"</td>":'<td class="width60 text-left tdLesson"><a href="../js/'+lHref+'">'+lessonNumShow+" "+lTitle+"</a></td>",table+='<td class="width20 text-center tdPoints">'+FLVS.Sitemap.module[cm].lesson[i].points+" "+ptitle+"</td>",table+='<td class="width20 text-center tdTime">'+FLVS.Sitemap.module[cm].lesson[i].time+" "+mtitle+"</td>";table+="</tr>";for(var lp=0;numPages>lp;lp++)if("true"==FLVS.Sitemap.module[cm].lesson[i].page[lp].custom){var customTitle=FLVS.Sitemap.module[cm].lesson[i].title,customHref=FLVS.Sitemap.module[cm].lesson[i].page[lp].href,customTitleShow=FLVS.Sitemap.module[cm].lesson[i].page[lp].chklistname,customPoints=FLVS.Sitemap.module[cm].lesson[i].page[lp].points,customTime=FLVS.Sitemap.module[cm].lesson[i].page[lp].time,customNum=FLVS.Sitemap.module[cm].lesson[i].page[lp].num;if(void 0!=customTitleShow&&(customTitle=customTitleShow),void 0!=customNum&&(lessonNumShow='<span class="lesson_number">'+customNum+"</span>"),table+="<tr>",is_custom_checklist){table+=1==isexternal?'<td class="width60 text-left tdLesson">'+lessonNumShow+" "+customTitle+"</td>":'<td class="width60 text-left tdLesson"><a href="'+customHref+'">'+lessonNumShow+" "+customTitle+"</a></td>";for(var jh=0;jh<cols.length;jh++){var wh=10*Math.round(60/cols.length/10);table+=void 0!=FLVS.Sitemap.module[cm].lesson[i].page[lp][cols[jh]]?'<td class="width'+wh+" text-center thCols_"+j+'">'+FLVS.Sitemap.module[cm].lesson[i].page[lp][cols[jh]]+"</td>":'<td class="width'+wh+" text-center thCols_"+j+'">&nbsp;</td>'}}else table+=1==isexternal?'<td class="width60 text-left tdLesson">'+lessonNumShow+" "+customTitle+"</td>":'<td class="width60 text-left tdLesson"><a href="'+customHref+'">'+lessonNumShow+" "+customTitle+"</a></td>",void 0!=customPoints?(1==Number(customPoints)?ptitle="Point":Number(customPoints)>1&&(ptitle="Points"),table+='<td class="width20 text-center tdPoints">'+customPoints+" "+ptitle+"</td>"):table+='<td class="width20 text-center tdPoints">&nbsp;</td>',void 0!=customTime?(1==Number(customTime)?mtitle="Minute":Number(customTime)>1&&(mtitle="Minutes"),table+='<td class="width20 text-center tdTime">'+customTime+" "+mtitle+"</td>"):table+='<td class="width20 text-center tdTime">&nbsp;</td>';table+="</tr>"}}table+="</tbody></table>",CKthis.html(table)}var CKthis=$(this);1==isexternal?loadSitemap(buildChecklist):buildChecklist()}),$(".table").each(function(){var titles;titles=new Array;for(var i=0;i<$(this).find("thead").find("th,td").length;i++)titles.push($(this).find("thead").find("th,td").eq(i).html());for(var i=0;i<$(this).find("tbody").find("tr").length;i++)for(var j=0;j<$(this).find("tbody").find("tr").eq(i).find("td").length;j++)$(this).find("tbody").find("tr").eq(i).find("td").eq(j).attr("data-title",titles[j])}),$("div.htmltext_version").each(function(){var me=$(this),src=$(this).attr("data-src"),videoBlock=$(this).find("video"),audioBlock=$(this).find("audio"),kalturaObj=$(this).find(".kaltura");if(kalturaObj.length>0){if("audio"===kalturaObj.data("type"))var kalturaAudio=kalturaObj.data("type");if(void 0===kalturaObj.data("type")||"videocc"===kalturaObj.data("type"))var kalturaVideo="video"}var mainContent=$(this).html();$(this).empty(),me.append($(document.createElement("div")).addClass("mainVersion").html(mainContent));var printTextVersion=$(document.createElement("a")).addClass("print").addClass("printText").addClass("btnlink").html('<span class="glyphicon glyphicon-print"></span> '+language.Print);$.ajax({url:src,type:"GET",dataType:"html",error:function(){alert("Error: Failed to get the text version.")},success:function(data){var body_html=document.createDocumentFragment();if($.each($(data),function(index,value){"#text"!==value.nodeName&&"META"!==value.nodeName&&"TITLE"!==value.nodeName&&body_html.appendChild(value)}),videoBlock.length||kalturaVideo)me.removeClass("text_version").addClass("videoInteractive"),me.append($(document.createElement("div")).addClass("video_textVersion").addClass("notVisible").append(body_html).append('<hr class="dashed"/>').append(printTextVersion)),me.append($(document.createElement("button")).addClass("toggleSwitch ftSwitch btn btn-primary vidText").text(language.TextVersion));else if(audioBlock.length||kalturaAudio)me.removeClass("text_version").addClass("audioInteractive"),me.append($(document.createElement("div")).addClass("audio_textVersion").addClass("notVisible").append(body_html).append('<hr class="dashed"/>').append(printTextVersion)),me.append($(document.createElement("button")).addClass("toggleSwitch ftSwitch btn btn-primary audText").text(language.TextVersion));else{{0!=me.children().first().outerWidth()?me.children().first().outerWidth():"auto"}me.append($(document.createElement("div")).addClass("textVersion").addClass("notVisible").append(body_html).append('<hr class="dashed"/>').append(printTextVersion)),me.append($(document.createElement("button")).addClass("toggleSwitch btn btn-primary").text(language.TextVersion))}globalBox(me)}})});var videoID={};$("div.kaltura").each(function(){var kaltura={uiconf_id:"33130941",partner_id:"2061901",entry_id:"1_tgvwkgzy",height:"400",width:"640","class":"",type:"",thumb_class:"kWidgetPlayBtn",image_class:"",custom_css:"kaltura.css"};if($(this).data("width")&&"0"!==$(this).data("width"))if("null"===$(this).data("width"))kaltura.width="";else{var dwA=$(this).data("width");if(dwA.charAt&&"%"==dwA.charAt(dwA.length-1)){dwA=dwA.substring(0,dwA.length-1)/100;var parent=$(this).parent().width();dwA=parent*dwA,dwA>parent&&(dwA=parent)}else dwA=parseInt(dwA,10);kaltura.width=dwA}else $(this).data("type")&&"audio"===$(this).data("type")?kaltura.width="340":$(this).data("type")&&"audiobtn"===$(this).data("type")&&(kaltura.width="30");if($(this).data("height")&&"0"!==$(this).data("height"))if("null"===$(this).data("height"))kaltura.height="";else{var dwH=$(this).data("height");if(dwH.charAt&&"%"==dwH.charAt(dwH.length-1)){dwH=dwH.substring(0,dwH.length-1)/100;var parent=$(this).parent().height();dwH=parent*dwH,dwH>parent&&(dwH=parent)}else dwH=parseInt(dwH,10);kaltura.height=dwH}else $(this).data("type")&&"audio"===$(this).data("type")?kaltura.height="40":$(this).data("type")&&"audiobtn"===$(this).data("type")&&(kaltura.height="30");$(this).attr("id")&&(kaltura.entry_id=$(this).attr("id")),$(this).attr("class")&&(kaltura.class=$(this).attr("class")),$(this).data("uiconfid")&&(kaltura.uiconf_id=$(this).data("uiconfid")),$(this).data("partnerid")&&(kaltura.partner_id=$(this).data("partnerid")),$(this).data("type")&&(kaltura.type=$(this).data("type")),videoID[kaltura.entry_id]="paused","audio"===kaltura.type?(kaltura.uiconf_id="36511471",kaltura.class="kalturaAudio",kaltura.thumb_class="kWidgetPlayBtn audio",kaltura.image_class="hide",kaltura.custom_css="kaltura_audio.css"):"audiobtn"===kaltura.type?(kaltura.class="kalturaAudioBtn",kaltura.uiconf_id="36582731",kaltura.thumb_class="kWidgetPlayBtn audiobtn",kaltura.image_class="hide",kaltura.custom_css="kaltura_audio.css"):"videocc"===kaltura.type&&(kaltura.uiconf_id="35766781");var scriptInclude="//cdnapisec.kaltura.com/p/"+kaltura.partner_id+"/sp/"+kaltura.partner_id+"00/embedIframeJs/uiconf_id/"+kaltura.uiconf_id+"/partner_id/"+kaltura.partner_id;$.getScript(scriptInclude).done(function(){new kWidget.api({wid:"_"+kaltura.partner_id}).doRequest({service:"baseentry",action:"list","filter:objectType":"KalturaBaseEntryFilter","filter:idEqual":kaltura.entry_id},function(data){if(!data.objects||!data.objects[0])return kWidget.log("Error getting entry"),void 0;var settings=(data.objects[0],{targetId:kaltura.entry_id,wid:"_"+kaltura.partner_id,entry_id:kaltura.entry_id,uiconf_id:kaltura.uiconf_id,height:kaltura.height,width:kaltura.width,captureClickEventForiOS:!0,flashvars:{myCustomPluginName:{plugin:!0,iframeHTML5Css:url_fromGlobal+"/css/"+kaltura.custom_css}}});settings.readyCallback=function(playerId){var kdp=document.getElementById(playerId);kdp.kBind("mediaReady",function(){videoID[playerId]="playing",kdp.sendNotification("doPlay"),kdp.kBind("doPlay",function(id){$.each(videoID,function(key){if(key!==id){videoID[key]="paused";var kdpC=document.getElementById(key);kdpC.sendNotification("doPause")}else videoID[key]="playing"})}),kdp.kBind("doPause",function(id){videoID[id]="paused"}),$.each(videoID,function(key){if(key!==playerId){var kdpC=document.getElementById(key);kdpC.sendNotification("doPause")}})})},$("#"+kaltura.entry_id).addClass(kaltura.class).append('<img class="kWidgetCentered '+kaltura.image_class+'" src="'+kWidget.getKalturaThumbUrl(settings)+'""><div class="kWidgetCentered '+kaltura.thumb_class+'"></div>').click(function(){kWidget.embed(settings)})})}).fail(function(){$("div.log").text("Triggered ajaxError handler for Kaltura.")})}),$("div.kaltura").length&&($(".carousel.slide").on("slid.bs.carousel",function(){kalturaPause()}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(){kalturaPause()}),$('[data-toggle="collapse"]').on("click",function(){$(this).hasClass("collapsed")===!1&&kalturaPause()})),$("#side_nav").find("a").tooltip({placement:"right",animation:!1}),$("#top_nav").find("a").tooltip({placement:"bottom",animation:!1}),$(document).on("click",".pop",function(){var location=$(this).attr("href"),height=600,width=700;if($(this).attr("data-height")&&(height=$(this).attr("data-height"),"%"==height.charAt(height.length-1))){var heightPercent=height.substring(0,height.length-1)/100,winHeight=$(window).height();height=winHeight*heightPercent}if($(this).attr("data-width")&&(width=$(this).attr("data-width"),"%"==width.charAt(width.length-1))){var widthPercent=width.substring(0,width.length-1)/100,winWidth=$(window).width();width=winWidth*widthPercent}{var externalLink=-1!=location.indexOf("http://")?"yes":"no";window.open(location,"popUp","toolbar="+externalLink+",location="+externalLink+",directories="+externalLink+", status=yes,menubar="+externalLink+",scrollbars=yes,resizable=yes,width="+width+",height="+height)}return!1}),$(".external-link").length>-1&&$(".external-link").each(function(){$(this).attr("target","_blank")}),collapseIcons(document),$(document).on("cbox_complete",function(){var title_height=$("#cboxTitle").height();if(title_height>20&&($("#cboxTitle").css({top:-title_height}),$("#cboxContent").css({"margin-top":title_height,height:$("#cboxContent").height()+title_height}),$("#cboxWrapper").css({height:$("#cboxWrapper").height()+title_height}),$("#colorbox").css({height:$("#colorbox").height()+title_height})),"ontouchstart"in document){var this_loc=window.document.location.href,parent_loc=window.parent.document.location.href;if(this_loc!=parent_loc){var boxTop=$("#colorbox").offset().top,boxHeight=$("#colorbox").height(),scrollTop=$(window.parent.document).scrollTop();boxTop+boxHeight>scrollTop&&$("#colorbox").css("top",scrollTop+50)}}})}function toggleVersion(){var showtxt=language.Interactive;if($(this).hasClass("vidText")&&(showtxt=language.Video),$(this).hasClass("audText")&&(showtxt=language.Audio),$(this).text($(this).text()==showtxt?language.TextVersion:showtxt),$(this).parent().children("div.swfObject").length>0)$(this).parent().children("div.swfObject").toggleClass("notVisible");else if($(this).parent().children("iframe").length>0)$(this).parent().children("iframe").toggleClass("notVisible");else{var interactive=$(this).parent().children(".activeInteractive, .videoInteractive, .audioInteractive, .mainVersion"),textversion=$(this).parent().children(".textVersion, .video_textVersion, .audio_textVersion");interactive.toggle("fast",function(){interactive.is(":visible")?textversion.addClass("notVisible"):(textversion.removeClass("notVisible"),collapseIcons(textversion))})}return $(this).prevAll(".textVersion, .video_textVersion, .audio_textVersion").hasClass("notVisible")||collapseIcons($(this).prevAll(".textVersion")),!1}function PrintPopup(data){function printTime(){mywindow.focus(),mywindow.print(),mywindow.close()}var mywindow=window.open("",language.Print,"height=400,width=600");mywindow.document.write("<html><head><title>"+language.Print+"</title>"),mywindow.document.write('<link type="text/css" rel="stylesheet" href="'+url_fromGlobal+'/css/flvs-core.min.css">'),mywindow.document.write('<link type="text/css" rel="stylesheet" href="'+localUrl+'/css/theme.css">'),mywindow.document.write('</head><body id="printBody">'),mywindow.document.write(data),mywindow.document.write("</body></html>"),mywindow.document.close();setTimeout(printTime,800);return!0}function collapseIcons(scope){$(".collapse",scope).on("shown.bs.collapse",function(){var i=$(this).prev().find("span.glyphicon");i.toggleClass("glyphicon-circle-arrow-down glyphicon-circle-arrow-up")}),$(".collapse",scope).on("hide.bs.collapse",function(){var i=$(this).prev().find("span.glyphicon");i.toggleClass("glyphicon-circle-arrow-down glyphicon-circle-arrow-up")})}function toolTip(scope){var defaults={animation:!1,placement:"top",trigger:"hover",html:!0};"ontouchstart"in window&&(defaults.trigger="manual",$("._tip",scope).click(function(){$(".dbtip_container").find("span").stop().fadeOut("fast"),$("._audio-tip").tooltip("hide"),$("._tip").not($(this)).tooltip("hide"),$(this,scope).tooltip("toggle")})),$("#side_nav a",scope).each(function(){var obj=defaults;obj.placement="right",$(this).tooltip(obj)}),$("#top_nav a",scope).each(function(){var obj=defaults;obj.placement="bottom",$(this).tooltip(obj)}),$("._tip",scope).each(function(){var obj=defaults;obj.placement=$(this).data("position"),obj.placement||(obj.placement=$(this).hasClass("tip-bottom")?"bottom":$(this).hasClass("tip-right")?"right":$(this).hasClass("tip-left")?"left":"top"),$(this).tooltip(obj)}),"ontouchstart"in window?$(".dbtip_container",scope).on("click",function(){$("._tip").tooltip("hide"),$("._audio-tip").tooltip("hide");var content=($(this).find("a"),$(this).find("span"));$(content).toggle();var hwidth=$(content).width()/2;$(content).css("left","-"+hwidth+"px")}).off("click",function(){var content=$(this).find("span");$(content).stop().fadeOut("fast")}):$(".dbtip_container",scope).hover(function(){var content=$(this).find("span");$(content).fadeIn("fast");var hwidth=$(content).width()/2;$(content).css("left","-"+hwidth+"px")},function(){var content=$(this).find("span");$(content).stop().fadeOut("fast")}),$("._audio-tip",scope).each(function(){var obj=defaults;obj.trigger="manual",obj.placement=$(this).data("position"),$(this).tooltip(obj)}),$("._audio-tip",scope).on("click",function(){$("._tip").tooltip("hide"),$(".dbtip_container").find("span").stop().fadeOut("fast"),$("._audio-tip").not($(this)).tooltip("hide"),$(this).tooltip("toggle"),$(".tooltip .audioBtn").mediaelementplayer({audioWidth:18,audioHeight:18,features:["playpause"],pluginPath:url_fromGlobal+"swf/"})}),$(document).on("click",function(event){$(event.target).not("._audio-tip").length&&$("._audio-tip").tooltip("hide")})}function init(){1==isexternal?buildCoursePage(!1):loadSitemap(buildCoursePage)}function buildCoursePage(xml){function load_templates(){function load_template(){$.ajax({type:"GET",url:templates[current_template],success:function(data){var dta=data;$(".wrapper").append(dta),current_template+=1,current_template==templates.length?exchangeTags():load_template()}})}var current_template=0;load_template(),$("body").append('<div class="wrapper"></div>')}function exchangeTags(){var logofile="imgs/layout/flvs_logo_color.png";"undefined"!=typeof settings.flvs_logo_type&&("color"==settings.flvs_logo_type||""==settings.flvs_logo_type?logofile="imgs/layout/flvs_logo_color.png":"white"==settings.flvs_logo_type?logofile="imgs/layout/flvs_logo_white.png":"black"==settings.flvs_logo_type&&(logofile="imgs/layout/flvs_logo_black.png")),$("div[data-tag='page_content']").replaceWith(content),"undefined"!=typeof language&&($("a[data-tag='link_home']").removeAttr("data-tag").addClass("link_home home").attr("href",home_page).attr("title",language.home_link).html("Home"),$("a[data-tag='link_next']").removeAttr("data-tag").addClass("link_next page_next").attr("href",next_page).attr("title",language.next_link),$("a[data-tag='link_prev']").removeAttr("data-tag").addClass("link_prev page_prev").attr("href",prev_page).attr("title",language.prev_link)),$("[data-tag='page_numbers']").replaceWith('<a href="javascript:void(0);" class="pagenum">'+current_page+" of "+total_pages+' ▼</a><div class="progress_meter_popup"><div class="progress_bar"></div></div>');for(var page_links_list='<div class="page_links"><span>NAVIGATE TO PAGE:</span>',i=0;i<page_links.length;i++)page_links_list+=i+1==current_page?'<a href="'+page_links[i]+'" class="active" title="'+page_title[i]+'">'+(i+1)+"</a>":'<a href="'+page_links[i]+'" title="'+page_title[i]+'">'+(i+1)+"</a>";if(page_links_list+='<br class="clear"/></div>',$(".progress_meter_popup").append(page_links_list),$(document).find("[data-tag=menu_links]").each(function(){var classname=$(this).attr("class"),menulink='<ul class="'+classname+'">';if(show.notes_link){var noteslink=""==settings.link_notes?"//cdn.flvs.net/cdn/lo/cornell_notes/":settings.link_notes;menulink+='<li><a href="'+noteslink+'" class="link_notes pop" title="'+language.nav_notes+'">Notes</a></li>'}if(show.glossary_link){var glossarylink=""==settings.link_glossary?localUrl+"/glossary.htm":settings.link_glossary,glossaryclass=touchSupport?"link_glossary pop":"link_glossary modal-pop";menulink+='<li><a href="../js/'+glossarylink+'" class="'+glossaryclass+'" title="'+language.nav_glossary+'">Glossary</a></li>'}if(menulink+='<li><a href="javascript:window.print();" class="link_print" title="'+language.nav_print+'">Print</a></li>',show.text_resize_links&&(menulink+='<li><a href="javascript:resizeText(\'up\');" class="link_textplus" title="'+language.nav_txtsizeplus+'">A+</a></li>',menulink+='<li><a href="javascript:resizeText(\'reset\');" class="link_textreset" title="'+language.nav_txtsizereset+'">A</a></li>',menulink+='<li><a href="javascript:resizeText(\'down\');" class="link_textminus" title="'+language.nav_txtsizeminus+'">A-</a></li>'),custom_menu_items.length>0)for(var i=0;i<custom_menu_items.length;i++)custom_menu_items[i][0]&&(menulink+='<li><a href="'+custom_menu_items[i][1]+'" class="'+custom_menu_items[i][2]+'" title="'+custom_menu_items[i][3]+'">'+custom_menu_items[i][0]+"</a></li>");
menulink+="</ul>",$(this).replaceWith(menulink)}),$("div[data-tag='course_title']").replaceWith(settings.course_title),$("a[data-tag='course_title']").removeAttr("data-tag").attr("href",home_page).html(settings.course_title),$("[data-tag='page_title']").replaceWith($("title").text()).addClass("page_title"),$(".page_title").html($("title").text()),external.show_flvs_copyright){var tmp_copyrightclass=$("[data-tag='copyright_link']").attr("class");$("[data-tag='copyright_link']").replaceWith('<a href="'+rootSet+'global/copyright.htm" class="'+tmp_copyrightclass+' tip-right modal-pop link_copyright" title="'+language.copyright_title+'">©</a>'),$("#footer_copyright").html("<span>Unless Otherwise Noted All Content © "+year+' Florida Virtual School</span><br><img src="'+url_fromGlobal+"/"+logofile+'" alt="Florida Virtual School" />'),settings.copyrightinblock&&$(footer_copyright).addClass("block")}if("undefined"!=typeof external.version_for_gs&&external.version_for_gs&&("undefined"==typeof external.version_for_gs&&""===external.version_num?alert("External version number is set to true, but you have no number set in the version number variable."):$("#footer_copyright").append($(document.createElement("div")).attr("id","version_num").html(external.version_num))),show.bookmarks_link&&($("div[data-tag='bookmarker']").replaceWith($(document.createElement("a")).attr("class","bookmarker").attr("href","javascript:void(0);").html(" ").addClass("tip-bottom")),$("div[data-tag='bookmark_link']").replaceWith($(document.createElement("a")).attr("href","javascript:void(0);").attr("class","link_bookmark").attr("title",language.nav_bookmark).html('<span class="visit_bookmark"></span>'))),$("div[data-tag='flvs_logo']").replaceWith('<img src="'+url_fromGlobal+"/"+logofile+'" alt="Florida Virtual School" />'),$("div[data-tag='copyright_statement']").replaceWith("<span>Unless Otherwise Noted All Content © "+year+" Florida Virtual School</span>"),$(".undefined").removeClass("undefined"),isexternal!==!0&&pagefound){if(show.menu===!0&&settings.default_menu===!0?createMenu():show.menu===!1&&($(".wrapper nav").remove(),$(".wrapper #nav_menu").remove(),$("#menua").remove(),$(".wrapper main").css("margin-top","0")),external.render_for_ca===!0){$(".lang").each(function(){var data=$(this).attr("data-term").split(":"),datatype=data[0],casetype=data[1],lang=language[datatype];"uc"==casetype?$(this).html(lang.replace(/^(.)|\s(.)/g,function($1){return $1.toUpperCase()})):$(this).html(lang.replace(/^(.)|\s(.)/g,function($1){return $1.toLowerCase()}))});var pgtitle=$("title").text();$("title").text(pgtitle.substring(5)),$(".page_title").text(pgtitle.substring(5)),$(".lesson_number").remove()}null==getCookie(settings.course_title+" bookmark")&&$(".link_bookmark, .nav_bookmark").hide(),$(".link_bookmark, .nav_bookmark").length&&$(".link_bookmark, .nav_bookmark").click(function(){null!=getCookie(settings.course_title+" bookmark")&&(window.location.href=getCookie(settings.course_title+" bookmark"))}),showBookmarkActive()?$(".bookmarker").addClass("bookmarkpage_active").attr("title",language.bookmark_active):$(".bookmarker").addClass("bookmarkpage").attr("title",language.bookmark_inactive),$(".bookmarker").click(function(){$(this).hasClass("bookmarkpage_active")?(unbookmarkPage(),$(this).addClass("bookmarkpage").removeClass("bookmarkpage_active").attr("data-original-title",language.bookmark_inactive),$(".link_bookmark,.nav_bookmark").hide()):(bookmarkPage(),$(this).addClass("bookmarkpage_active").removeClass("bookmarkpage").attr("data-original-title",language.bookmark_active),$(".link_bookmark, .nav_bookmark").show())})}else if($("#footer").remove(),$("#menua").remove(),$("#nav_menu").remove(),$(".copyright_link").remove(),$(".link_bookmark").remove(),$(".bookmarker").remove(),"undefined"!=typeof template_defs&&template_defs.length>0)for(var i=0;i<template_defs.length;i++)$("."+template_defs[i]).remove();completeParsing(pageLoaded)}function completeParsing(callback){if(pagefound&&!touchSupport&&1!=typeof isexternal&&$(document).keyup(function(event){if(pagefound){37==event.keyCode?window.location.href=prev_page:$(".page_next").length>0&&39==event.keyCode&&(window.location.href=next_page)}}),"undefined"==typeof isexternal&&settings.default_menu===!0&&($(".menubtn, .menubtn_mobile").click(function(){$(".nav_menu_lessons").hide(),$("#menu").is(":visible")?($("#nav_menu").fadeToggle("fast"),$(".menu_backdrop").remove()):($("#nav_menu").fadeToggle("fast"),$("body").append('<div class="menu_backdrop">&nbsp;</div>'),$(".menu_backdrop, .nav_menu_lessons").click(function(){$(".menu_backdrop").remove(),$("#nav_menu").fadeToggle("fast")})),$(".nav_menu_modules a:first").focus()}),$(".modlink").click(function(){$(".nav_menu_lessons").hide(),$(this).next().stop().fadeIn("fast")})),"undefined"==typeof isexternal&&($(".breadcrumbs_course").html(FLVS.settings.course_title),$(".breadcrumbs_module").html(FLVS.Sitemap.module[current_module].title),FLVS.Sitemap.module[current_module].num&&$(".breadcrumbs_module_num").html(FLVS.Sitemap.module[current_module].num),$(".breadcrumbs_lesson").html(FLVS.Sitemap.module[current_module].lesson[current_lesson].title),$(".breadcrumbs_lesson_num").html(FLVS.Sitemap.module[current_module].lesson[current_lesson].num)),1==isexternal&&($("body").css("background-image","none"),$("body").css("background-color","#ffffff")),$(".row").find("div").last().css("margin-right","0px"),$(".print").each(function(){$(this).addClass("btnlink"),$(this).prepend('<span class="glyphicon glyphicon-print"></span> ')}),$(".save").each(function(){$(this).addClass("btnlink"),$(this).prepend('<span class="glyphicon glyphicon-file"></span> ')}),$(".page-close").each(function(){$(this).addClass("btnlink"),$(this).prepend('<span class="glyphicon glyphicon-remove"></span> ')}),$(".external-link").each(function(){$(this).addClass("btnlink"),$(this).prepend('<span class="glyphicon glyphicon-share"></span>  ')}),$(".mp3-link").each(function(){$(this).addClass("btnlink"),$(this).prepend('<span class="glyphicon glyphicon-headphones"></span> ')}),$("div.well[data-bg]").each(function(){var info=$(this).attr("data-bg").split(":");$(this).attr("style","background-image:url("+info[0]+")"),void 0!=info[1]&&void 0!=info[2]?$(this).css("background-position",info[1]+" "+info[2]):$(this).css("background-position","top left"),void 0!=info[3]?$(this).css("background-repeat",info[3]):$(this).css("background-repeat","no-repeat")}),$(".printArea").each(function(){var newlink=$(document.createElement("a")).attr("href","javascript:void(0);").attr("class","print printText btnlink").html('<span class="glyphicon glyphicon-print"></span> '+language.Print);$(this).append(newlink)}),$("div.icon").each(function(){var iconAlt=$(this).attr("data-alt")?$(this).attr("data-alt"):" ",icon=$(document.createElement("img")).attr("src",url_fromGlobal+"/imgs/icons/"+$(this).attr("data-icon")+".png");$(this).html('<img src="'+url_fromGlobal+"/imgs/icons/"+$(this).attr("data-icon")+'.png" alt="'+iconAlt+'" />'),$(icon).width()>64&&($(icon).width(64),$(icon).height(64))}),$("div.icon_local").each(function(){var iconAlt=$(this).attr("data-alt")?$(this).attr("data-alt"):" ",icon=$(document.createElement("img")).attr("src","../../global/images/icons/"+$(this).attr("data-icon")+".png");$(this).html('<img src="'+localUrl+"/images/icons/"+$(this).attr("data-icon")+'.png" alt="'+iconAlt+'" />'),$(icon).width()>64&&($(icon).width(64),$(icon).height(64))}),$("div.assignment,div.overview,div.objective,div.infobox").each(function(){$(this).find("div.icon").css("position","absolute").css("top","-10px").css("left","0px"),$(this).find("div.icon_local").css("position","absolute").css("top","-10px").css("left","0px")}),$("div.shout[data-icon]").each(function(){$(this).prepend('<div class="icon"><img src="'+url_fromGlobal+"/imgs/icons/"+$(this).attr("data-icon")+'.png" /></div>')}),$("img").each(function(){if($(this).attr("class")&&!$(this).hasClass("quote_image")&&!$(this).hasClass("skipimg")){{var container=$(document.createElement("div"));$(this)}if($(this).after(container),$(this).appendTo(container),$(container).addClass("image-container"),void 0!=$(this).attr("data-width")){var dwA=$(this).attr("data-width");if("%"==dwA.charAt(dwA.length-1)){dwA=dwA.substring(0,dwA.length-1)/100;var parent=$(this).parent().width();dwA=parent*dwA,dwA>parent&&(dwA=parent)}else dwA=parseInt($(this).attr("data-width"),10);$(container).css("max-width",dwA)}else{var imgWidth=$(this).width();imgWidth>0&&$(container).css("max-width",imgWidth)}if($(this).hasClass("showcase")&&($(container).addClass("showcase"),$(this).removeClass("showcase")),($(this).hasClass("border")||$(this).hasClass("frame"))&&($(this).hasClass("border")?($(this).removeClass("border"),$(container).addClass("border")):$(this).hasClass("frame")&&($(this).removeClass("frame"),$(container).addClass("frame"))),$(this).hasClass("pull-left")&&($(this).removeClass("pull-left"),$(container).addClass("pull-left")),$(this).hasClass("pull-right")&&($(this).removeClass("pull-right"),$(container).addClass("pull-right")),$(this).hasClass("top-flush")&&($(this).removeClass("top-flush"),$(container).addClass("top-flush")),void 0!==$(this).attr("data-caption")&&$(container).append('<span class="caption">'+$(this).attr("data-caption")+"</span>"),void 0!==$(this).attr("data-copyright")&&$(container).append('<span class="copyright">'+$(this).attr("data-copyright")+"</span>"),void 0!==$(this).attr("data-text")&&(0!=$(container).find("span.copyright").length?touchSupport?$(container).find("span.copyright").append(' <a href="'+$(this).attr("data-text")+'" class="modal-pop dlink" title="'+language.TextVersion+'"><span class="glyphicon glyphicon-share"></span></a>'):$(container).find("span.copyright").append(' <a href="'+$(this).attr("data-text")+'" class="modal-pop tip-right dlink" title="'+language.TextVersion+'"><span class="glyphicon glyphicon-share"></a>'):$(container).append('<a href="'+$(this).attr("data-text")+'" class="modal-pop dlink" title="'+language.TextVersion+'"><span class="glyphicon glyphicon-share"></a>')),$(this).hasClass("lightbox")){var lbMaxWidth,lbTitle="",lbMaxHeight="";void 0!==$(this).attr("data-caption")&&(lbTitle=$(this).attr("data-caption")),void 0!==$(this).attr("data-copyright")&&(lbTitle=""==lbTitle?$(this).attr("data-copyright"):lbTitle+" | "+$(this).attr("data-copyright")),void 0!==$(this).attr("data-lightBoxText")&&(lbTitle=""==lbTitle?$(this).attr("data-lightBoxText"):lbTitle+" | "+$(this).attr("data-lightBoxText")),void 0!==$(this).attr("data-maxWidth")&&(lbMaxWidth=$(this).attr("data-maxWidth"));var lbMaxWidth=lbMaxWidth=void 0!==$(this).attr("data-maxWidth")?$(this).attr("data-maxWidth"):"",lbMaxHeight=lbMaxHeight=void 0!==$(this).attr("data-maxHeight")?$(this).attr("data-maxHeight"):"";$(this).removeAttr("data-caption").removeAttr("data-copyright").removeAttr("data-lightBoxText").removeAttr("data-maxWidth").removeAttr("data-maxHeight");var lightboxlink=$(document.createElement("a")).attr("href",$(this).attr("data-link")).addClass("lightbox").attr("title",lbTitle).attr("data-maxWidth",lbMaxWidth).attr("data-maxHeight",lbMaxHeight);$(container).prepend(lightboxlink),$(this).removeClass("lightbox"),$(this).appendTo(lightboxlink);var magnify=$(document.createElement("a")).attr("class","enlarge").attr("href",$(this).attr("data-link")).addClass("lightbox").attr("title",lbTitle).attr("data-maxWidth",lbMaxWidth).attr("data-maxHeight",lbMaxHeight);$(container).append(magnify)}if($(this).hasClass("gallery")){var lbTitle="";void 0!=$(this).attr("data-caption")&&(lbTitle=$(this).attr("data-caption")),void 0!=$(this).attr("data-copyright")&&(lbTitle=""==lbTitle?$(this).attr("data-copyright"):lbTitle+" | "+$(this).attr("data-copyright")),void 0!=$(this).attr("data-lightBoxText")&&(lbTitle=""==lbTitle?$(this).attr("data-lightBoxText"):lbTitle+" | "+$(this).attr("data-lightBoxText"));var lbMaxWidth=lbMaxWidth=void 0!=$(this).attr("data-maxWidth")?$(this).attr("data-maxWidth"):"",lbMaxHeight=lbMaxHeight=void 0!=$(this).attr("data-maxHeight")?$(this).attr("data-maxHeight"):"";$(this).removeAttr("data-caption").removeAttr("data-copyright").removeAttr("data-lightBoxText").removeAttr("data-maxWidth").removeAttr("data-maxHeight");var lightboxlink=$(document.createElement("a")).attr("href",$(this).attr("data-link")).attr("rel",$(this).attr("data-group")).addClass("gallery").attr("title",lbTitle).attr("data-maxWidth",lbMaxWidth).attr("data-maxHeight",lbMaxHeight);$(container).prepend(lightboxlink),$(this).appendTo(lightboxlink);var magnify=$(document.createElement("a")).attr("class","enlarge").attr("href",$(this).attr("data-link")).addClass("lightbox").attr("title",lbTitle).attr("data-maxWidth",lbMaxWidth).attr("data-maxHeight",lbMaxHeight);$(container).append(magnify),$(this).removeClass("gallery")}var classes=$(this).attr("class");$(container).addClass(classes)}}),show.progress_bar?($(".progress_bar").each(function(){var w=$(this).width();w>"500"&&(w="300"),determine_progress($(this),w)}),$(".pagenum").click(function(){$(".progress_meter_popup").stop().fadeToggle("fast"),$(".progress_meter_popup a.active").focus()}),$(window).click(function(e){!$(".pagenum").is(e.target)&&$(".progress_meter_popup").is(":visible")&&$(".progress_meter_popup").stop().fadeToggle("fast")})):$("a.pagenum").replaceWith('<p class="pagenum">'+current_page+" of "+total_pages+" </p>"),$(".video").each(function(){var videoWidth=$(this).attr("width"),videoHeight=$(this).attr("height");"undefined"==typeof videoWidth&&(videoWidth="100%",$(this).css("width",videoWidth)),"undefined"==typeof videoHeight&&(videoHeight="100%",$(this).css("height",videoHeight)),$(this).wrap("<div class='video_container' style='width: 100%; height:100%; max-width: "+videoWidth+"px; max-height: "+videoHeight+"px'></div>"),$(this).css({width:"99%",height:"99%"}),$("<div class='clear'></div>").appendTo(".video_container")}),$(".audio").each(function(){$(this).wrap("<div class='audio_container' style='width: 100%; height:100%; '></div>"),$(this).css({width:"99%",height:"99%"})}),$(".show_mobile").each(function(){touchSupport?$(this).show():$(this).hide()}),$(".hide_mobile").each(function(){touchSupport?$(this).hide():$(this).show()}),show.glossary_link&&glossary.init(),welcomeFolder.init(),unlockPage.init(),activateAssets(),FLVS.settings.isAndroid===!0){var android_fix=""!=settings.layout_fixed_css?","+settings.layout_fixed_css:"";$("#headbar, #side_nav, #menu, #menua, #nav_menu, #popup, #overlay"+android_fix).css({position:"absolute"})}eval(pagescript),$("body").css("visibility","visible").hide(),$("body").fadeIn(500,function(){if(1!=isexternal&&0!=show.menu){var pos=$("#menu_inner").offset();$("#nav_menu").css("left",pos.left+"px"),$(window).on("resize",function(){var pos=$("#menu_inner").offset();$("#nav_menu").css("left",pos.left+"px")})}}),callback()}if(1!=isexternal){var pvt_url=$(location).attr("href"),pvt_file=pvt_url.toString().match(/.*\/(.+?)\./);pvt_file=pvt_file[1];var pvt_currentpos,root=$(xml).find("sitemap"),module_count=root.find("module").length;root.find("page").each(function(index){var myurl=$(this).attr("href"),myfile=myurl.substr(myurl.lastIndexOf("/")+1);return myfile=myfile.toString().match(/(.+?)\./),pvt_file==myfile[1]&&(pagefound=!0,pvt_currentpos=index,current_page=$(this).index()+1,total_pages=$(this).siblings().length+1,current_page_of_module=$(this).index(),current_lesson=$(this).closest("lesson").index(),current_module=$(this).closest("module").index(),current_page_of_module=$(this).closest("module").index(),current_lesson_count=$(this).closest("module").children("lesson").length,next_page=total_pages>current_page?$(this).next().attr("href"):current_lesson_count-1>current_lesson?$(this).closest("lesson").next().find("page:eq(0)").attr("href"):home_page,prev_page=current_page>1?$(this).prev().attr("href"):current_lesson>0?$(this).closest("lesson").prev().find("page").last().attr("href"):home_page),!0})}if(pagefound&&1!=isexternal&&("module"==FLVS.settings.show_page_number_by?(total_pages_in_module=getPagesInModule(),total_pages=total_pages_in_module,current_page=current_page_of_module):"lesson"==FLVS.settings.show_page_number_by&&(total_pages_in_module=getPagesInLesson(),total_pages=total_pages_in_module,current_page=current_page)),1!=isexternal){var templates=[],content=$("#pageContent");$("#pageContent").remove(),$("head").append('<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">'),$("head").append('<meta charset="utf-8">'),$.ajax({type:"GET",url:localUrl+"/xml/templates.xml",dataType:"xml",success:function(xml){var bestfit=0;if(1==isexternal)bestfit=1;else for(var i=0;i<$(xml).find("set").length;i++){var set_orientation=$(xml).find("set").eq(i).attr("orientation"),set_device=$(xml).find("set").eq(i).attr("device");if(touchSupport&&set_device==device_type&&set_orientation==screen_orient){bestfit=i;break}}for(var j=0;j<$(xml).find("set").eq(bestfit).find("template").length;j++){var file=$(xml).find("set").eq(bestfit).find("template").eq(j).text();templates.push(localUrl+"/templates/layout/"+file)}load_templates()}})}else $("#pageContent").wrap('<div class="external_container">'),exchangeTags()}function cleanURL(a,b){var n=a.indexOf(b);return n>0?a.substr(0,a.length-(a.length-n)):a}function is_touch_device(){return!!("ontouchstart"in window)}function is_in_frame(){var this_loc=window.document.location.href,cheatsheetUrl=new RegExp("//develop.flvs.net/Collaborate/Course/_template/v"+CFVersion+"/cheatsheet/.*.htm");if(this_loc!=this_loc.match(cheatsheetUrl)){var parent_loc=window.parent.document.location.href;return this_loc!=parent_loc?!0:!1}}function resizeText(direction){"up"==direction?max_font_size>=current_font_size+font_size_incriment&&($("p").css("font-size",current_font_size+font_size_incriment+"px"),$("p").css("line-height",current_font_size+4+"px"),current_font_size+=font_size_incriment):"down"==direction?current_font_size-font_size_incriment>=min_font_size&&($("p").css("font-size",current_font_size-font_size_incriment+"px"),$("p").css("line_height",current_font_size-4+"px"),current_font_size-=font_size_incriment):"reset"==direction&&($("p").css("font-size",default_font_size+"px"),$("p").css("line-height",default_font_size+4+"px"),current_font_size=default_font_size)}function areCookiesEnabled(){var cookieEnabled=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||cookieEnabled||(document.cookie="testcookie",cookieEnabled=-1!=document.cookie.indexOf("testcookie")?!0:!1),cookieEnabled}function setCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}function getCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function deleteCookie(name){setCookie(name,"",-1)}function bookmarkPage(){var this_url=window.location.href;null!=getCookie(settings.course_title+" bookmark")?setCookie(settings.course_title+" bookmark",this_url,30):(deleteCookie(settings.course_title+" bookmark"),setCookie(settings.course_title+" bookmark",this_url,30))}function unbookmarkPage(){deleteCookie(settings.course_title+" bookmark")}function showBookmarkActive(){var this_url=window.location.href;return null!=getCookie(settings.course_title+" bookmark")&&getCookie(settings.course_title+" bookmark")==this_url?!0:!1}function resetNav(){$("#sidemenu .backbtn").removeClass("active"),$("#sidemenu_current").empty(),$("#sidemenu_list a").removeAttr("class"),$("ul.modules").css({top:"0"}).children().children("a").addClass("active"),$("#sidemenu_scroll").css({height:31*$("ul.modules").children().length+"px"}),$("#sidemenu").css({height:31*($("ul.modules").children().length+1)+"px"})}function getDeviceInfo(){screen_orient=$(window).width()>$(window).height()?"landscape":"portrait";var _w=window.innerWidth?window.innerWidth:$(window).width(),_h=window.innerHeight?window.innerHeight:$(window).height(),tabletView=_w>=979&&_h>=600;device_type=tabletView?"tablet":"phone"}function getPagesInModule(){var myurl=$(location).attr("href"),thisfile=myurl.substr(myurl.lastIndexOf("/")+1);thisfile=thisfile.toString().match(/(.+?)\./),thisfile=thisfile[1];for(var cnt=0,lessons=FLVS.Sitemap.module[current_module].lesson,i=0;i<lessons.length;i++)for(var a=0;a<lessons[i].page.length;a++){cnt+=1,page_links.push(lessons[i].page[a].href),page_title.push(lessons[i].page[a].title);var myurl=lessons[i].page[a].href,myfile=myurl.substr(myurl.lastIndexOf("/")+1);myfile=myfile.toString().match(/(.+?)\./),myfile=myfile[1],thisfile==myfile&&(current_page_of_module=cnt)}return cnt}function getPagesInLesson(){var myurl=$(location).attr("href"),thisfile=cleanURL(myurl,"#");thisfile.substr(thisfile.lastIndexOf("/")+1),thisfile=thisfile.toString().match(/(.+?)\./),thisfile=thisfile[1];for(var cnt=0,lessons=FLVS.Sitemap.module[current_module].lesson[current_lesson],a=0;a<lessons.page.length;a++){cnt+=1,page_links.push(lessons.page[a].href),page_title.push(lessons.page[a].title);var myurl=lessons.page[a].href,myfile=myurl.substr(myurl.lastIndexOf("/")+1);myfile=myfile.toString().match(/(.+?)\./),myfile=myfile[1],thisfile==myfile&&(current_page_of_module=cnt)}return cnt}function determine_progress(bar,width){var myurl=$(location).attr("href"),thisfile=cleanURL(myurl,"#");thisfile=thisfile.substr(thisfile.lastIndexOf("/")+1),thisfile=thisfile.toString().match(/(.+?)\./),thisfile=thisfile[1];for(var cnt=0,curr=0,lesson_data=[],lessons=FLVS.Sitemap.module[current_module].lesson,i=0;i<lessons.length;i++){for(var lesson_cnt=0,a=0;a<lessons[i].page.length;a++){cnt+=1,page_links.push(lessons[i].page[a].href),page_title.push(lessons[i].page[a].title),lesson_cnt+=1;var myurl=lessons[i].page[a].href,myfile=myurl.substr(myurl.lastIndexOf("/")+1);myfile=myfile.toString().match(/(.+?)\./),myfile=myfile[1],thisfile==myfile&&(curr=cnt)}lesson_data.push([lesson_cnt,language.lesson_name+" "+pad(i)])}for(var urhere=$(document.createElement("div")).addClass("you_are_here").html('Current Progress<div class="arrow"></div>'),barg=$(document.createElement("div")).addClass("bar"),progress=$(document.createElement("div")).addClass("progression"),tot=0,j=0;j<lesson_data.length;j++){var myW=lesson_data[j][0]/cnt;myW=Math.round(myW*width)-1;var item=$(document.createElement("div")).addClass("bar_segment").attr("style","width:"+myW+"px");tot+=lesson_data[j][0],curr>tot?$(item).addClass("complete"):tot>curr&&curr>tot-lesson_data[j][0]&&$(item).addClass("inprogress");var lessonNumStart=FLVS.Sitemap.module[current_module].lessonNumStart,lessonCountUp=j+parseInt(lessonNumStart);lessonTitleBar=void 0!==lessonNumStart?0==j?"Lesson 0"+lessonNumStart:"Lesson 0"+lessonCountUp:lesson_data[j][1],myW>20&&100>myW?$(item).html(lessonTitleBar):myW>100&&$(item).html("<span>"+lessonTitleBar+" - "+lesson_data[j][0]+" Pages</span>"),$(item).appendTo(barg)}var completed=Math.round(curr/cnt*100);$(urhere).appendTo(bar),$(barg).appendTo(bar),$(progress).appendTo(bar);var title=$(document.createElement("div")).attr("style","width:"+width+"px").addClass("progressbar_title").html("Current Module Progress");$(title).insertAfter(bar),$(urhere).html(completed+'%<div class="arrow"></div>'),$(urhere).css("left",completed+"%"),$(progress).css("width",completed+"%")}function pad(num){for(var s=num+"";s.length<2;)s="0"+s;return s}function createMenu(){var menu='<div id="menu">';menu+='<ul class="nav_menu_modules">';for(var i=0;i<FLVS.Sitemap.module.length;i++){var modNum=FLVS.Sitemap.module[i].num?FLVS.Sitemap.module[i].num:"";if(""!==modNum)var moduleFormat=["",modNum,"Module "+modNum];else var moduleFormat=["","",""];if("true"==FLVS.Sitemap.module[i].visible||getCookie(settings.course_title+" preview")){menu+="<li>",menu+='<a href="javascript:void(0);" class="modlink"><span class="modlinkModule">'+moduleFormat[settings.moduleFormatMenu||"0"]+"</span> "+FLVS.Sitemap.module[i].title+"</a>",menu+='<ul class="nav_menu_lessons mod'+(i+1)+'">';for(var submenu="",j=0;j<FLVS.Sitemap.module[i].lesson.length;j++){var llink=FLVS.Sitemap.module[i].lesson[j].page[0].href,ltitle=FLVS.Sitemap.module[i].lesson[j].title,lnum=FLVS.Sitemap.module[i].lesson[j].num,lmins=FLVS.Sitemap.module[i].lesson[j].time,lpoints=FLVS.Sitemap.module[i].lesson[j].points;submenu+="<li>";var mainWidth=$("main").css("width");submenu+=mainWidth>"760px"?0==j||2==j||4==j||6==j||8==j||10==j||12==j||14==j||16==j||18==j||20==j||22==j?'<a href="'+llink+'"><span class="lesson_num">'+lnum+"</span>":'<a href="'+llink+'" class="odd"><span class="lesson_num">'+lnum+"</span>":mainWidth>"500px"?0==j||2==j||5==j||7==j||8==j||10==j||13==j||15==j||16==j||18==j||21==j||23==j?'<a href="'+llink+'"><span class="lesson_num">'+lnum+"</span>":'<a href="'+llink+'" class="odd"><span class="lesson_num">'+lnum+"</span>":j%2==0?'<a href="'+llink+'"><span class="lesson_num">'+lnum+"</span>":'<a href="'+llink+'" class="odd"><span class="lesson_num">'+lnum+"</span>";var minutes="mins";Number(FLVS.Sitemap.module[i].lesson[j].time)<2&&(minutes="min");var points="pts";Number(FLVS.Sitemap.module[i].lesson[j].points)<2&&(points="pt"),submenu+='<span class="lesson_title">'+ltitle+'</span><span class="lesson_nfo">'+lmins+" "+minutes+" | "+lpoints+" "+points+"</span></a>",submenu+="</li>"}menu+=submenu,menu+="</ul>",menu+="</li>"}}menu+="</ul></div>",$("#nav_menu").append(menu),$(".nav_menu_lessons .modlink").remove()}function loadSitemap(callback,datatype){("undefined"===settings.sitemap_dir||null===settings.sitemap_dir)&&(settings.sitemap_dir="global/xml/sitemap.xml");var data_type="undefined"==typeof datatype?"xml":datatype;$.ajax({url:rootSet+settings.sitemap_dir,processData:!1,dataType:data_type,error:function(){alert("Error: Failed to Load "+data_type+". Please make sure that the sitemap exists.")},beforeSend:function(){},success:[function(data){try{FLVS.Sitemap=$.xml2json(data,!0)}catch(e){}},callback]})}function homeFromHere(){var homeLink="";return homeLink=getCookie(settings.course_title+" preview")?"../index_preview.htm":settings.course_home,homeLink=homeLink.substr(homeLink.lastIndexOf("/")+1),rootSet+homeLink}function jQMath_Reparse(){$(document.body).find(".math").length>0&&jqMath.parseMath(document.body)}function addClassML(element,newClassString){if("object"==typeof element&&"string"===newClassString&&newClassString.length>0){var i,n=0;for(newClass=newClassString.split(","),i=0;i<newClass.length;i++){var currentClass=$(element).attr("class");"string"==typeof currentClass&&currentClass>0?-1==currentClass.indexOf(" "+newClass[i]+" ")&&($(element).attr("class",currentClass+=" "+newClass[i]),n++):$(element).attr("class",newClass[i])}return n}return-1}function afterMathParse(){"td.fm-mtd:has(.red.math-sum)"===$("td.fm-mtd:has(.red.math-sum)").selector&&$("td.fm-mtd:has(.red.math-sum)").addClass("redunderline"),"td.fm-mtd:has(.red.math-sum-row)"===$("td.fm-mtd:has(.red.math-sum-row)").selector&&$("td.fm-mtd:has(.red.math-sum-row)").parent().addClass("redunderline"),"td.fm-mtd.mrow:has(.red.math-sum-row)"===$("td.fm-mtd.mrow:has(.red.math-sum-row)").selector&&$("td.fm-mtd:has(.red.math-sum-row)").parent().addClass("redunderline"),"mtd:has(.red.math-sum)"===$("mtd:has(.red.math-sum)").selector&&$("mtd:has(.red.math-sum)").addClass("redunderline")," "!=$("mtd:has(.red.math-sum-row)")&&addClassML($("mtd:has(.red.math-sum-row)").parent(),"redunderline")," "!=$("mtd:has(.red.math-sum)")&&addClassML($("mtd:has(.red.math-sum)").parent(),"redunderline")}$(document).on("click",".toggleSwitch",toggleVersion),$(document).on("click",".printText, .printIt",function(){PrintPopup($(this).parent().html())});var touchSupport=is_touch_device(),screen_width=$(window).width(),screen_orient="landscape",device_type="desktop",date=new Date,year=date.getFullYear(),cd=date,next_page,prev_page,home_page=homeFromHere(),total_pages,current_page,current_page_of_module,total_pages_in_module,current_module,current_lesson,current_path,showNext=!0,pagefound=!1,formatTooltips,page_links=[],page_title=[],langCheck=0,default_font_size=16,max_font_size=20,min_font_size=14,current_font_size=16,font_size_incriment=2,pagescript=$("script[data-local='true']").html();$("script[data-local='true']").remove(),Array.indexOf||(Array.prototype.indexOf=function(obj,start){for(var i=start||0;i<this.length;i++)if(this[i]==obj)return i;return-1});var unlockPage={init:function(){if("undefined"!=typeof gsVars){console.log("Unlock is running");var tpl=gsVars.custom_tpl;if("undefined"!=typeof tpl&&tpl.indexOf("maln_false")>=0){console.log("adding unlock class");var selectors=["lesson_number","lesson_num","breadcrumbs_lesson_num","breadcrumbs_module_num","mnumber"];selectors.forEach(function(value){var selector="."+value;$(selector).addClass("unlock").removeClass(value)})}if("undefined"!=typeof gsVars.custom_res)for(var unlockRes=JSON.parse(gsVars.custom_res),i=0;i<unlockRes.length;i++)loadCss(unlockRes[i])}}},gWords,glossary={init:function(){sessionStorage.removeItem("glossaryWords"),sessionStorage?sessionStorage.getItem("glossaryWords")?(gWords=JSON.parse(sessionStorage.getItem("glossaryWords")),glossary.setup()):glossary.readXML():glossary.readXML()},readXML:function(){$.ajax({type:"GET",url:rootSet+"global/xml/glossary.xml",dataType:"xml",success:function(data){try{var item=$.xml2json(data,!0)}catch(e){}var gObj=new Object;if(item.item){for(var i=0;i<item.item.length;i++)gObj[i+1]={term:item.item[i].term,definition:item.item[i].text};sessionStorage&&sessionStorage.setItem("glossaryWords",JSON.stringify(gObj)),gWords=gObj,glossary.setup()}else console.log("you have nothing in your glossary XML, glossary automation will not work.")},error:function(jqXHR,textStatus,errorThrown){console.log("Request Failed for the glossary XML file: "+errorThrown)}})},setup:function(){$(".glossaryTerm").length>0&&$(".glossaryTerm").each(function(){var id=$(this).html(),position=$(this).data("position"),trigger=$(this).data("trigger");$(this).data("trigger");var classes=this.className,output=glossary.populate(id,position,trigger,classes);output&&($(this).after(output),$(this).remove())})},populate:function(id,position,trigger,classes){function ucfirst(string){return string.charAt(0).toUpperCase()+string.slice(1)}position||(position=""),trigger||(trigger="click");var outputHTML;return $.each(gWords,function(index){(gWords[index].term===id.toLowerCase()||gWords[index].term===id)&&(outputHTML='<a href="javascript:void(0);" id="gt_'+index+'" class="pop-over '+classes+'"  data-original-title="'+ucfirst(id)+'" data-content="'+gWords[index].definition+'" data-placement="'+position+'" data-trigger="'+trigger+'">'+id+"</a>")}),outputHTML||console.log("I could not find: "+id),outputHTML}},wFolder,welcomeFolder={init:function(){welcomeFolder.readXML()},readXML:function(){$.getJSON("//cdn.flvs.net/cdn/welcome_folder/welcome.json").done(function(data){wFolder=data,welcomeFolder.setup()}).fail(function(jqxhr,textStatus,error){var err=textStatus+", "+error;console.log("Request Failed: "+err)})},setup:function(){$(".welcomePage").length>0&&$(".welcomePage").each(function(){var id=$(this).data("id"),classes=this.className,output=welcomeFolder.populate(id,classes);output&&($(this).after(output),$(this).remove(),globalBox($("#welcome_"+id)))})},populate:function(id){var pageItem=$.grep(wFolder.pages,function(n){return n.id==id}),value=pageItem[0],outputHTML="";return value&&(outputHTML='<div id="welcome_'+id+'"><h2>'+value.title+"</h2>"+value.text+"</div>"),outputHTML}};