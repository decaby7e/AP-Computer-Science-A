// ----------------------------------------------------------------------
// -- REQUIRE SETUP, CSS Importer:
// ----------------------------------------------------------------------
// -- NOTE: Do not edit this file unless you are a WDS team member.
// -- ABOUT: This file loads all libraries and creates each page.
// -- Authors/Assembler: jmullins@flvs.net
// ======================================================================

//===========================================================
//CSS loader and array cleaner
function cleanArray(actual) {
	var newArray = new Array();
	for (var i = 0; i < actual.length; i++) {
		if (actual[i]) {
			newArray.push(actual[i]);
		}
	}
	return newArray;
}

function loadCss(url) {
	var link = document.createElement("link");
	link.type = "text/css";
	link.rel = "stylesheet";
	link.href = url;
	document.getElementsByTagName("head")[0].appendChild(link);
}



//Require jQuery
//===============================================================================================
//use url_fromGlobalFolders since this file is in the global/scripts folder
require.config({
	waitSeconds: 0,
    paths: {
        'jQuery': 'jquery-2.1.0.min',
		'plugins_min': 'plugins/jquery.plugins.concat',
		'bootstrap': 'bootstrap.min',
		'bootstrapAccess': 'bootstrap-accessibility.min',
		'setup': 'setup',
		'coreJS': 'core_master.min',
		'home_setup': 'home_mod',
		'cheatsheet_setup': 'cheat_mod',
		'googleUA': 'analytics_mod',
		'jqMath': 'plugins/jqmath-etc-0.4.0.min',
		//'colorbox': 'plugins/jquery.colorbox-min',
		//'roundabout': 'plugins/jquery.roundabout.min',
		//'slides': 'plugins/jquery.slides.min',
		//'swfobject': 'plugins/jquery.swfobject.1-1-1.min',
		'xml2json': 'plugins/jquery.xml2json',
		//'jstween': 'plugins/jstween-1.1.min',
		'mediaelement': 'plugins/mediaelement-and-player.min',
		'lib': 'flvs_lib-4.0',
		'core': 'flvs_core-4.0',
		'scripts_min': 'flvs_master.min',
		'glossary': 'glossary',
		'language': 'language',
		'jQueryUI': 'jquery-ui-1.10.4.custom.min',
		'interactives': 'importer',
		//LOCALS//
		'local_language': url_forRequire+'/language',
		'local_course': url_forRequire+'/course',
		'local_home': url_forRequire+'/home',
		'local_analytics': url_forRequire+'/analytical',
		//INTERACTIVE PLUGINS//
		'ui_quiz' : 'il/custom_plugins/ui_quiz',
		'jMatch' : 'il/custom_plugins/jquery.ui.jmatch',
		'jMatch_v2' : 'il/custom_plugins/jquery.ui.jmatch_v2',
		'jTimeline' : 'il/custom_plugins/jquery.ui.jtimeline',
		'jFlipbook' : 'il/custom_plugins/jquery.ui.jflipbook',
		'jqCloud' : 'il/custom_plugins/jquery.ui.jqcloud',
		'jFlipCard' : 'il/custom_plugins/jquery.ui.cardflip',
		'jCardstack' : 'il/custom_plugins/jquery.ui.cardStack',
		'jDragDrop' : 'il/custom_plugins/jquery.ui.drag_and_drop',
		'jDragDrop_v2' : 'il/custom_plugins/jquery.ui.drag_and_drop_v2',
		'iPicture' : 'il/custom_plugins/jquery.iPicture',
		'_map' : 'il/custom_plugins/jquery.ui.mapper',
		'jCrossword' : 'il/custom_plugins/jquery.ui.slide_crossword',
		'jCustom' : 'il/custom_plugins/jCustom'
		
    },
    shim: {
        // %mins------------------------------     'jQuery': { exports: '$' },
        'coreJS': { exports: '$' },
		// %mins------------------------------     'xml2json': ['jQuery'],
		'xml2json': ['coreJS'],
		// %mins------------------------------     'plugins_min': ['jQuery'],
		'plugins_min': ['coreJS'],
		// %mins------------------------------     'bootstrap': ['jQuery'],
		// %mins------------------------------     'bootstrapAccess': ['bootstrap'],
		'bootstrapAccess': ['coreJS'],
		// %mins------------------------------     'setup': ['bootstrap', 'xml2json'],
		'setup': ['coreJS', 'xml2json'],
		// %mins------------------------------     'local_course':['lib','core'],
		'local_course':['scripts_min'],
		'local_home':['home_setup'],
		// %mins------------------------------     'interactives':['lib','core']
		'interactives':['scripts_min']
    }
});
// %mins------------------------------     require(['jQuery', 'xml2json', 'plugins_min', 'bootstrap', 'setup'], function ($, plugins_min, bootstrap, setup) {
require(['coreJS', 'xml2json', 'plugins_min', 'setup'], function ($, xml2json, plugins_min, setup) {

	if(settings.use_analytics == true) {
		require(['googleUA']);
	}
	
	if(typeof include_math !== 'undefined' && include_math == true){
		require(['jqMath'], function (jqMath){});
		loadCss(url_fromGlobal + '/css/jqmath-0.4.0.css');
        //loadCss("http://fonts.googleapis.com/css?family=UnifrakturMaguntia", "head");

	}
	
	if(typeof include_ui !== 'undefined' && include_ui == true){
		require(['jQueryUI'], function (jQueryUI){
			$(this).trigger('jqueryui_loaded');
		});
		loadCss(url_fromGlobal + '/css/ilskin/jquery-ui-1.10.4.custom.min.css');
	}
	
	
	require(['bootstrapAccess'], function (bootstrapAccess){});

});

